{% extends "base/layout.html" %}

{% load staticfiles %}

{% block assets %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

<!-- <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" />
<script src="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script>-->
<script src='https://api.mapbox.com/mapbox.js/v2.2.1/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v2.2.1/mapbox.css' rel='stylesheet' />

<link rel="stylesheet" href="{% static "base/base.css" %}"/>
<link rel="stylesheet" href="{% static "workflow/css/call.css" %}"/>
<script src="{% static "workflow/js/call.js" %}"></script>
{% endblock %}

{% block body %}

<div class="layout-breve">
    <div class="layout-major detail-modal">
        <div class="layout-breve">
            <form method="post">

                {% csrf_token %}

                <div class="fieldWrapper">
                    {{ form.problem_address.errors }}
                    <h5>Address</h5>
                    {{ form.problem_address }}
                </div>

                <div class="fieldWrapper hidden-attr">
                    {{ form.address_recording_url.errors }}
                    {{ form.address_recording_url }}
                </div>

                <div>
                    {% if form.address_recording_url != '' %}
                        <audio controls><source src="{{ form.address_recording_url.value }}.mp3" type="audio/mpeg"></audio>
                    {% endif %}
                </div>

                <div class="fieldWrapper">
                    {{ form.problem_description.errors }}
                    <h5>Description</h5>
                    {{ form.problem_description }}
                </div>

                <div class="fieldWrapper hidden-attr">
                    {{ form.description_recording_url.errors }}
                    {{ form.description_recording_url }}
                </div>

                <div>
                    {% if form.description_recording_url != '' %}
                        <audio controls><source src="{{ form.description_recording_url.value }}.mp3" type="audio/mpeg"></audio>
                    {% endif %}
                </div>

                <div class="fieldWrapper">
                    {{ form.caller_name.errors }}
                    <h5>Reported By</h5>
                    {{ form.caller_name }}
                </div>

                <div class="fieldWrapper hidden-attr">
                    {{ form.name_recording_url.errors }}
                    {{ form.name_recording_url }}
                </div>

                <div>
                    {% if form.name_recording_url != '' %}
                        <audio controls><source src="{{ form.name_recording_url.value }}.mp3" type="audio/mpeg"></audio>
                    {% endif %}
                </div>

                <div class="fieldWrapper">
                    {{ form.call_time.errors }}
                    <h5>Reported At</h5>
                    {{ form.call_time }}
                </div>

                <div class="fieldWrapper">
                    {{ form.caller_number.errors }}
                    <h5>Contact</h5>
                    {{ form.caller_number }}
                </div>

                <div class="fieldWrapper">
                    <h5>Property Owner</h5>
                        {{ form.property_owner.errors }}
                        {{ form.property_owner }}
                </div>

                <div class="fieldWrapper">
                    <h5>Owner contact</h5>
                        {{ form.property_owner_phone.errors }}
                        {{ form.property_owner_phone }}
                </div>

                <div class="fieldWrapper">
                    <h5>Assignee</h5>
                        {{ form.assignee.errors }}
                        {{ form.assignee }}
                </div>

                <div class="fieldWrapper">
                    <h5>Status</h5>
                        {{ form.status.errors }}
                        {{ form.status }}
                </div>

                <br/>
                <input id="save-form" class="btn btn-primary" type="submit" value="Save"/>
                <input id="save-form" class="btn btn-success" type="submit" value="Create Case"/>
            </form>
        </div>
    </div>

    <div class="layout-minor detail-modal">
        <div class="layout-breve layout-breve-thin">
            <h4>{{ form.problem_address.value }}</h4>
        </div>
        <div id="map"></div>
    </div>
</div>

{% endblock %}
